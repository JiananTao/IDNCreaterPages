(self["webpackChunkIDNCreaterPages"]=self["webpackChunkIDNCreaterPages"]||[]).push([[587],{1344:function(e,t,n){"use strict";n.r(t),t["default"]="Story Title: 111\n[0] [ ] In a distant land, there was a country named Azeria with a majestic city called Altamia. [1]\n\n[1] [distant] In this distant era, various creatures thrived on this land, and a myriad of fantastical races coexisted in harmony. [2]\n\n[2] [creatures] There were humans, elves, dwarves, and other beings, each with their unique culture and skills, together creating a diverse world. [3]\n\n[1] [land] This land was known as \"Sarian,\" a place filled with mystery and adventure, attracting countless explorers. [4]\n\n[4] [adventurers] The adventurers made many like-minded friends and left numerous legendary tales on this land. [5]\n\n[5] [legendary] These legendary stories have been passed down to this day, becoming a topic of conversation among people and inspiring future generations to pursue their adventurous dreams. [6]\n\n[1] [country] Azeria was a powerful nation, with rulers who upheld fairness and justice, providing a happy life for the people. [7]\n\n[1] [city] Altamia, the capital of Azeria, was a paradise for adventurers and a hub for culture and commerce. [8]\n\n[8] [culture] In Altamia, adventurers could learn various knowledge and skills to prepare themselves for their journeys. [9]\n\n[2] [fantastical] In this fantastical world, magic and skills coexisted, and explorers made many new friends while pursuing their dreams. [10]\n\n[3] [humans] In the city of Altamia, humans lived peacefully alongside other races, all working together for the city's prosperity. [11]\n\n[11] [coexistence] This peaceful coexistence created an atmosphere of vitality and creativity in Altamia. [12]\n\n[12] [vitality] The bustling city of Altamia held various events daily, such as athletic competitions, concerts, and markets. [13]\n\n[3] [elves] The elves were famous for their elegant appearance and advanced magical abilities, playing important roles within the city of Altamia. [14]\n\n[14] [magic] Magic played a crucial role in Altamia's development, providing a powerful driving force for the city's growth. [15]\n\n[3] [dwarves] Dwarves excelled in forging and engineering, constructing many magnificent buildings and intricate devices in Altamia. [16]\n\n[16] [architecture] These buildings and devices became iconic landmarks in Altamia, attracting countless tourists for sightseeing. [17]\n\n[4] [Sarian] On the continent of Sarian, numerous unknown secrets awaited brave adventurers to discover. [18]\n\n[18] [secrets] These secrets included ancient ruins hidden in dense forests, mines buried within mountains, and treasures submerged at the bottom of lakes. [19]\n\n[5] [stories] These legendary tales were not only an inspiration for adventurers but also the spiritual pillar for everyone living on the continent of Sarian. [20]\n\n[20] [spiritual pillar] When people faced difficulties and setbacks, these stories encouraged them to face challenges bravely and keep moving forward. [21]\n[21] [challenges] As people overcame these challenges, they became stronger and more united, sharing their experiences and wisdom with others. [22]\n\n[22] [stronger] The bonds between the diverse races and creatures grew stronger, fostering a sense of unity and shared purpose throughout the continent of Sarian. [23]\n\n[23] [unity] With unity came progress, as people from different backgrounds collaborated to create new inventions and develop their society. [24]\n\n[24] [inventions] These inventions revolutionized the way people lived, making life more comfortable and convenient for everyone on Sarian. [25]\n\n[25] [comfortable] As living conditions improved, the people of Sarian turned their focus to exploring the world around them and seeking greater knowledge. [26]\n\n[26] [knowledge] This thirst for knowledge led to the establishment of great libraries and academies, where people could learn and grow together. [27]\n\n[27] [libraries] These libraries housed vast collections of books and scrolls, covering a wide range of topics from history to magic, and from engineering to the arts. [28]\n\n[28] [history] The history of Sarian was filled with stories of heroes and heroines, of battles and alliances, and of the rise and fall of civilizations. [29]\n\n[29] [heroes] Among these heroes were legendary adventurers who had left their mark on the world, inspiring future generations to follow in their footsteps. [30]\n\n[30] [adventurers] Aspiring adventurers formed parties and set out on exciting journeys across the land, facing perilous trials and uncovering hidden secrets. [31]\n\n[31] [journeys] Each journey was unique, as adventurers encountered strange creatures, discovered ancient relics, and solved intricate puzzles to unlock the mysteries of Sarian. [32]\n\n[32] [mysteries] As these mysteries were gradually revealed, the people of Sarian gained a deeper understanding of their world and its rich history, leading them to appreciate the importance of cooperation and unity. [33]\n\n[33] [cooperation] Through cooperation, the people of Sarian built a harmonious society that thrived on the values of friendship, compassion, and mutual respect. [34]\n\n[34] [friendship] Friendships forged on the road of adventure became lifelong bonds, connecting people from all walks of life and transcending the boundaries of race and culture. [35]\n\n[35] [bonds] These bonds enriched the lives of everyone on Sarian, weaving a tapestry of shared experiences and stories that would be passed down through generations, forever shaping the legacy of this fantastical land. [36]\n\n[36] [tapestry] As the tapestry of shared experiences grew, so too did the world of Sarian, with new lands and regions being discovered by intrepid explorers. [37]\n\n[37] [new lands] These new lands brought with them unique challenges and opportunities, as well as the chance to encounter previously unknown races and creatures. [38]\n\n[38] [unknown races] Among the unknown races were the enigmatic Aquarians, who lived in harmony with the sea and had the ability to control water. [39]\n\n[39] [Aquarians] The Aquarians, with their incredible maritime knowledge, helped establish new trade routes, connecting distant lands and enriching the lives of all inhabitants of Sarian. [40]\n\n[40] [trade routes] The flourishing trade brought not only prosperity, but also an exchange of ideas, customs, and knowledge that further enriched the diverse cultures of Sarian. [41]\n\n[41] [exchange] This exchange of ideas led to the development of new magical techniques, groundbreaking technological advancements, and innovative artistic expressions. [42]\n\n[42] [magical techniques] Among these magical techniques was the ability to manipulate the elements, allowing people to control fire, earth, air, and water in ways never before imagined. [43]\n\n[43] [elements] Harnessing the power of the elements led to significant improvements in agriculture, industry, and transportation, as well as in the ways people protected themselves from natural disasters. [44]\n\n[44] [agriculture] With improved agriculture, the people of Sarian were able to cultivate a diverse range of crops, ensuring a steady food supply and paving the way for population growth. [45]\n\n[45] [population growth] As the population grew, so too did the demand for entertainment, leading to the rise of talented bards, playwrights, and performers who regaled audiences with tales of heroism and adventure. [46]\n\n[46] [entertainment] The shared enjoyment of entertainment further strengthened the bonds between people, as they laughed, cried, and marveled together at the stories unfolding before their eyes. [47]\n\n[47] [bonds] The strengthening of these bonds led to the formation of powerful alliances between the various races, ensuring that the people of Sarian could stand together in the face of adversity. [48]\n\n[48] [alliances] United in their determination to protect their homeland, the people of Sarian faced numerous challenges, from natural disasters to the rise of dark forces that threatened to engulf the world. [49]\n\n[49] [dark forces] These dark forces, led by a powerful sorcerer bent on conquering the world, brought destruction and chaos wherever they went, causing untold suffering and forcing the people of Sarian to take up arms in defense of their way of life. [50]\n\n[50] [sorcerer] To defeat the sorcerer and his minions, the heroes of Sarian had to embark on a perilous quest to discover ancient artifacts, unlock the secrets of lost magic, and forge new alliances with powerful allies. [51]\n\n[51] [ancient artifacts] The search for these ancient artifacts took the heroes to the far corners of Sarian, through treacherous dungeons, haunted forests, and even to the depths of the ocean, where they encountered wonders and dangers beyond their wildest imagination. [52]\n\n[52] [allies] Along the way, the heroes forged alliances with beings such as the wise and enigmatic dragons, who possessed vast knowledge and incredible power, and the valiant centaurs, renowned for their skill in battle. [53]\n\n[53] [dragons] With the aid of the dragons, the heroes were able to learn powerful new spells and unlock the potential of the ancient artifacts they had discovered, greatly enhancing their abilities in their fight against the sorcerer. [54]\n\n[54] [centaurs] The centaurs, with their unparalleled archery skills and unwavering loyalty, bolstered the heroes' forces, providing much-needed support on the battlefield. [55]\n\n[55] [battlefield] The final battle between the forces of good and the sorcerer's dark minions took place on a vast plain, with the fate of Sarian hanging in the balance. [56]\n\n[56] [fate] As the two sides clashed, the heroes unleashed the full power of the ancient artifacts, casting a brilliant light that pierced through the darkness and weakened the sorcerer's control over his minions. [57]\n\n[57] [light] With the tide of battle turning in their favor, the heroes fought valiantly, their newfound powers and steadfast allies giving them the strength to defeat the sorcerer and banish the dark forces from the land. [58]\n\n[58] [defeat] In the aftermath of the great battle, the people of Sarian came together to rebuild their world, using the knowledge, skills, and resources they had gained through their many adventures to create a brighter future for all. [59]\n\n[59] [rebuild] As they rebuilt their cities, towns, and villages, the people of Sarian also forged new friendships and strengthened their bonds, ensuring that their world would be more united and resilient than ever before. [60]\n\n[60] [friendships] The tales of heroism, sacrifice, and camaraderie that emerged from this epic struggle became an integral part of the ever-expanding tapestry of Sarian's history, inspiring future generations to embark on their own adventures and continue the legacy of the heroes who had come before them. [61]\n\n[61] [legacy] And so, the cycle of adventure, discovery, and growth continued, as the people of Sarian faced new challenges, uncovered new secrets, and forged new alliances, forever shaping the destiny of their magical world. [62]\n\n[3] [creatures] In this world, there were tales of a powerful artifact known as the Earthlock, said to have the ability to control the very ground beneath one's feet. [63]\n\n[3] [unique culture] Among the diverse cultures, there were those who had dedicated themselves to studying ancient magic, including the secrets of the Earthlock. [64]\n\n[3] [skills] Some skilled adventurers were rumored to possess the knowledge and abilities necessary to locate and wield the Earthlock, with the potential to reshape the world. [65]\n\n[63] [control] Those who could control the Earthlock had the power to prevent natural disasters or cause them, depending on their intentions. [66]\n\n[63] [ground] In order to utilize the Earthlock's power, one had to be deeply connected to the earth and possess an innate understanding of its energies. [67]\n\n[63] [beneath] The Earthlock was said to be hidden deep beneath the surface of Sarian, in a long-forgotten cavern protected by ancient magic. [68]\n\n[64] [studying] The scholars who studied the ancient magic of the Earthlock spent their lives deciphering cryptic texts and uncovering the secrets of the past. [69]\n\n[64] [ancient magic] The ancient magic related to the Earthlock involved manipulating the energies of the earth to achieve various effects, such as causing tremors or stabilizing tectonic plates. [70]\n\n[64] [secrets] Many of the secrets of the Earthlock had been lost to time, with only fragments of knowledge remaining in ancient texts and the memories of the oldest beings of Sarian. [71]\n\n[65] [locate] To locate the Earthlock, one would need to follow a series of cryptic clues and ancient maps, hidden in the most remote and dangerous corners of the world. [72]\n\n[65] [wield] Wielding the Earthlock required not only knowledge and skill, but also a strong sense of responsibility and a deep understanding of the potential consequences of its power. [73]\n\n[65] [reshape] With the power to reshape the world, the Earthlock had the potential to be used for great good or terrible evil, depending on the intentions of the one who controlled it. [74]\n\n[67] [connected] Alex, feeling a deep connection to the earth, believed he was destined to find the Earthlock and use its power for the greater good. [75]\n\n[67] [energies] In his journey, Alex learned to harness the energies of the earth, using them to enhance his abilities and overcome various challenges. [76]\n\n[67] [understanding] Alex's understanding of the earth's energies grew stronger as he studied ancient texts and sought the wisdom of experienced mentors. [77]\n\n[68] [cavern] The cavern housing the Earthlock was said to be a place of immense natural beauty, with crystalline formations reflecting the magical energies within. [78]\n\n[68] [protected] The protective magic surrounding the Earthlock's cavern included powerful wards that would repel intruders, as well as illusions to conceal its true location. [79]\n\n[68] [ancient] The ancient civilization that had hidden the Earthlock away had left behind cryptic warnings about the power of the artifact and the dangers of its misuse. [80]\n\n[69] [texts] The texts that Alex studied during his journey were written in a variety of languages and scripts, some of which had been all but forgotten over time. [81]\n\n[69] [secrets] As Alex unraveled the secrets of the Earthlock, he began to understand the true nature of the artifact and the responsibility that came with wielding it. [82]\n\n[69] [past] The history of the Earthlock was shrouded in mystery, with legends of great heroes and terrible villains who had once sought its power for their own ends. [83]\n\n[71] [knowledge] Alex discovered that the knowledge of the Earthlock was fragmented, with different pieces of information scattered among various races and cultures throughout Sarian. [84]\n\n[71] [ancient texts] Some of the ancient texts that contained information about the Earthlock were kept in hidden libraries, guarded by ancient orders sworn to protect their secrets. [85]\n\n[71] [memories] In his search for the Earthlock, Alex encountered powerful beings who had lived for centuries, their memories holding the key to unlocking the artifact's true potential. [86]\n\n\n"},4292:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return en}});var r=n(6252),s=n(9963),o=n(3577);const i={class:"community"},a={key:0,class:"header"},l=(0,r._)("h1",{class:"h1"},"Mulit-Author Interactive Novel Reader",-1),h=[l],c={class:"header"},u=(0,r._)("h2",null,"Popular Novels",-1),d=(0,r._)("br",null,null,-1),f={class:"novels-container"},p=["src","alt"];function g(e,t,n,l,g,_){const m=(0,r.up)("CommunityTutorial"),w=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(m),l.store.btnToggle?((0,r.wg)(),(0,r.iD)("header",a,h)):(0,r.kq)("",!0),(0,r._)("header",c,[u,(0,r._)("button",{class:"button",onClick:t[0]||(t[0]=e=>_.importFile())},"Submit"),(0,r._)("input",{type:"file",id:"file-input",style:{display:"none"},onChange:t[1]||(t[1]=(...e)=>_.onFileInputChange&&_.onFileInputChange(...e))},null,32)]),d,(0,r._)("div",f,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.novelStore.novels,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"novel-item",key:e.title},[(0,r._)("div",null,[(0,r.Wm)(w,{to:{name:"reader",query:{startReading:!0}},onClick:(0,s.iM)((e=>_.readNovel(t)),["prevent"])},{default:(0,r.w5)((()=>[(0,r._)("img",{src:e.cover,alt:e.title,class:"novel-cover"},null,8,p)])),_:2},1032,["onClick"])]),(0,r._)("h3",null,(0,o.zw)(e.title),1)])))),128))])])}n(7658);var _=n(3226),m=n(7080),w=n(3977);const b={apiKey:"AIzaSyCVEr6ULFvAwmAmV3UMlu80kkY6BQ2ifDc",authDomain:"idncreater.firebaseapp.com",projectId:"idncreater",storageBucket:"idncreater.appspot.com",messagingSenderId:"760391243578",appId:"1:760391243578:web:b2f6ed0bfba9f6c3952203",measurementId:"G-R5JC1S3W1F"},v=(0,w.ZF)(b);var y=n(5816),k=n(4444),T=n(8463);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const E="firebasestorage.googleapis.com",R="storageBucket",A=12e4,S=6e5,U=1e3;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class O extends k.ZR{constructor(e,t,n=0){super(N(e),`Firebase Storage: ${t} (${N(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,O.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return N(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var C,x;function N(e){return"storage/"+e}function I(){const e="An unknown error occurred, please check the error payload for server response.";return new O(C.UNKNOWN,e)}function D(e){return new O(C.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function P(e){return new O(C.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function L(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new O(C.UNAUTHENTICATED,e)}function F(){return new O(C.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function q(e){return new O(C.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function B(){return new O(C.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function M(){return new O(C.CANCELED,"User canceled the upload/download.")}function z(e){return new O(C.INVALID_URL,"Invalid URL '"+e+"'.")}function j(e){return new O(C.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function H(){return new O(C.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+R+"' property when initializing the app?")}function V(){return new O(C.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function W(){return new O(C.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function $(){return new O(C.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function G(e){return new O(C.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function X(e){return new O(C.INVALID_ARGUMENT,e)}function K(){return new O(C.APP_DELETED,"The Firebase app was deleted.")}function Z(e){return new O(C.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function J(e,t){return new O(C.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Y(e){throw new O(C.INTERNAL_ERROR,"Internal error: "+e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e["UNKNOWN"]="unknown",e["OBJECT_NOT_FOUND"]="object-not-found",e["BUCKET_NOT_FOUND"]="bucket-not-found",e["PROJECT_NOT_FOUND"]="project-not-found",e["QUOTA_EXCEEDED"]="quota-exceeded",e["UNAUTHENTICATED"]="unauthenticated",e["UNAUTHORIZED"]="unauthorized",e["UNAUTHORIZED_APP"]="unauthorized-app",e["RETRY_LIMIT_EXCEEDED"]="retry-limit-exceeded",e["INVALID_CHECKSUM"]="invalid-checksum",e["CANCELED"]="canceled",e["INVALID_EVENT_NAME"]="invalid-event-name",e["INVALID_URL"]="invalid-url",e["INVALID_DEFAULT_BUCKET"]="invalid-default-bucket",e["NO_DEFAULT_BUCKET"]="no-default-bucket",e["CANNOT_SLICE_BLOB"]="cannot-slice-blob",e["SERVER_FILE_WRONG_SIZE"]="server-file-wrong-size",e["NO_DOWNLOAD_URL"]="no-download-url",e["INVALID_ARGUMENT"]="invalid-argument",e["INVALID_ARGUMENT_COUNT"]="invalid-argument-count",e["APP_DELETED"]="app-deleted",e["INVALID_ROOT_OPERATION"]="invalid-root-operation",e["INVALID_FORMAT"]="invalid-format",e["INTERNAL_ERROR"]="internal-error",e["UNSUPPORTED_ENVIRONMENT"]="unsupported-environment"})(C||(C={}));class Q{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Q.makeFromUrl(e,t)}catch(r){return new Q(e,"")}if(""===n.path)return n;throw j(e)}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";function s(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}const o="(/(.*))?$",i=new RegExp("^gs://"+r+o,"i"),a={bucket:1,path:3};function l(e){e.path_=decodeURIComponent(e.path)}const h="v[A-Za-z0-9_]+",c=t.replace(/[.]/g,"\\."),u="(/([^?#]*).*)?$",d=new RegExp(`^https?://${c}/${h}/b/${r}/o${u}`,"i"),f={bucket:1,path:3},p=t===E?"(?:storage.googleapis.com|storage.cloud.google.com)":t,g="([^?#]*)",_=new RegExp(`^https?://${p}/${r}/${g}`,"i"),m={bucket:1,path:2},w=[{regex:i,indices:a,postModify:s},{regex:d,indices:f,postModify:l},{regex:_,indices:m,postModify:l}];for(let b=0;b<w.length;b++){const t=w[b],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Q(e,s),t.postModify(n);break}}if(null==n)throw z(e);return n}}class ee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e,t,n){let r=1,s=null,o=null,i=!1,a=0;function l(){return 2===a}let h=!1;function c(...e){h||(h=!0,t.apply(null,e))}function u(t){s=setTimeout((()=>{s=null,e(f,l())}),t)}function d(){o&&clearTimeout(o)}function f(e,...t){if(h)return void d();if(e)return d(),void c.call(null,e,...t);const n=l()||i;if(n)return d(),void c.call(null,e,...t);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),u(s)}let p=!1;function g(e){p||(p=!0,d(),h||(null!==s?(e||(a=2),clearTimeout(s),u(0)):e||(a=1)))}return u(0),o=setTimeout((()=>{i=!0,g(!0)}),n),g}function ne(e){e(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(e){return void 0!==e}function se(e){return"function"===typeof e}function oe(e){return"object"===typeof e&&!Array.isArray(e)}function ie(e){return"string"===typeof e||e instanceof String}function ae(e){return le()&&e instanceof Blob}function le(){return"undefined"!==typeof Blob&&!(0,k.UG)()}function he(e,t,n,r){if(r<t)throw X(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw X(`Invalid value for '${e}'. Expected ${n} or less.`)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function ue(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const s=t(r)+"="+t(e[r]);n=n+s+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function de(e,t){const n=e>=500&&e<600,r=[408,429],s=-1!==r.indexOf(e),o=-1!==t.indexOf(e);return n||s||o}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["NO_ERROR"]=0]="NO_ERROR",e[e["NETWORK_ERROR"]=1]="NETWORK_ERROR",e[e["ABORT"]=2]="ABORT"})(x||(x={}));class fe{constructor(e,t,n,r,s,o,i,a,l,h,c,u=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=i,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=c,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new pe(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===x.NO_ERROR,s=n.getStatus();if(!t||de(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===x.ABORT;return void e(!1,new pe(!1,null,t))}const o=-1!==this.successCodes_.indexOf(s);e(!0,new pe(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());re(e)?n(e):n()}catch(o){r(o)}else if(null!==s){const e=I();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){const e=this.appDelete_?K():M();r(e)}else{const e=B();r(e)}};this.canceled_?t(!1,new pe(!1,null,!0)):this.backoffId_=te(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&ne(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class pe{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function ge(e,t){null!==t&&t.length>0&&(e["Authorization"]="Firebase "+t)}function _e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function me(e,t){t&&(e["X-Firebase-GMPID"]=t)}function we(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function be(e,t,n,r,s,o,i=!0){const a=ue(e.urlParams),l=e.url+a,h=Object.assign({},e.headers);return me(h,t),ge(h,n),_e(h,o),we(h,r),new fe(l,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ye(...e){const t=ve();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(le())return new Blob(e);throw new O(C.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function ke(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(e){if("undefined"===typeof atob)throw G("base-64");return atob(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Re{constructor(e,t){this.data=e,this.contentType=t||null}}function Ae(e,t){switch(e){case Ee.RAW:return new Re(Se(t));case Ee.BASE64:case Ee.BASE64URL:return new Re(Oe(e,t));case Ee.DATA_URL:return new Re(xe(t),Ne(t))}throw I()}function Se(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){const s=n<e.length-1&&56320===(64512&e.charCodeAt(n+1));if(s){const s=r,o=e.charCodeAt(++n);r=65536|(1023&s)<<10|1023&o,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ue(e){let t;try{t=decodeURIComponent(e)}catch(n){throw J(Ee.DATA_URL,"Malformed data URL.")}return Se(t)}function Oe(e,t){switch(e){case Ee.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){const t=n?"-":"_";throw J(e,"Invalid character '"+t+"' found: is it base64url encoded?")}break}case Ee.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){const t=n?"+":"/";throw J(e,"Invalid character '"+t+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Te(t)}catch(s){if(s.message.includes("polyfill"))throw s;throw J(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class Ce{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw J(Ee.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=Ie(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function xe(e){const t=new Ce(e);return t.base64?Oe(Ee.BASE64,t.rest):Ue(t.rest)}function Ne(e){const t=new Ce(e);return t.contentType}function Ie(e,t){const n=e.length>=t.length;return!!n&&e.substring(e.length-t.length)===t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,t){let n=0,r="";ae(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(ae(this.data_)){const n=this.data_,r=ke(n,e,t);return null===r?null:new De(r)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new De(n,!0)}}static getBlob(...e){if(le()){const t=e.map((e=>e instanceof De?e.data_:e));return new De(ye.apply(null,t))}{const t=e.map((e=>ie(e)?Ae(Ee.RAW,e).data:e.data_));let n=0;t.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let s=0;return t.forEach((e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]})),new De(r,!0)}}uploadData(){return this.data_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(e){let t;try{t=JSON.parse(e)}catch(n){return null}return oe(t)?t:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(e){if(0===e.length)return null;const t=e.lastIndexOf("/");if(-1===t)return"";const n=e.slice(0,t);return n}function Fe(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}function qe(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(e,t){return t}class Me{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Be}}let ze=null;function je(e){return!ie(e)||e.length<2?e:qe(e)}function He(){if(ze)return ze;const e=[];function t(e,t){return je(t)}e.push(new Me("bucket")),e.push(new Me("generation")),e.push(new Me("metageneration")),e.push(new Me("name","fullPath",!0));const n=new Me("name");function r(e,t){return void 0!==t?Number(t):t}n.xform=t,e.push(n);const s=new Me("size");return s.xform=r,e.push(s),e.push(new Me("timeCreated")),e.push(new Me("updated")),e.push(new Me("md5Hash",null,!0)),e.push(new Me("cacheControl",null,!0)),e.push(new Me("contentDisposition",null,!0)),e.push(new Me("contentEncoding",null,!0)),e.push(new Me("contentLanguage",null,!0)),e.push(new Me("contentType",null,!0)),e.push(new Me("metadata","customMetadata",!0)),ze=e,ze}function Ve(e,t){function n(){const n=e["bucket"],r=e["fullPath"],s=new Q(n,r);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function We(e,t,n){const r={type:"file"},s=n.length;for(let o=0;o<s;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return Ve(r,e),r}function $e(e,t,n){const r=Pe(t);if(null===r)return null;const s=r;return We(e,s,n)}function Ge(e,t,n,r){const s=Pe(t);if(null===s)return null;if(!ie(s["downloadTokens"]))return null;const o=s["downloadTokens"];if(0===o.length)return null;const i=encodeURIComponent,a=o.split(","),l=a.map((t=>{const s=e["bucket"],o=e["fullPath"],a="/b/"+i(s)+"/o/"+i(o),l=ce(a,n,r),h=ue({alt:"media",token:t});return l+h}));return l[0]}function Xe(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(e){if(!e)throw I()}function Je(e,t){function n(n,r){const s=$e(e,r,t);return Ze(null!==s),s}return n}function Ye(e,t){function n(n,r){const s=$e(e,r,t);return Ze(null!==s),Ge(s,r,e.host,e._protocol)}return n}function Qe(e){function t(t,n){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?F():L():402===t.getStatus()?P(e.bucket):403===t.getStatus()?q(e.path):n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}return t}function et(e){const t=Qe(e);function n(n,r){let s=t(n,r);return 404===n.getStatus()&&(s=D(e.path)),s.serverResponse=r.serverResponse,s}return n}function tt(e,t,n){const r=t.fullServerUrl(),s=ce(r,e.host,e._protocol),o="GET",i=e.maxOperationRetryTime,a=new Ke(s,o,Je(e,n),i);return a.errorHandler=et(t),a}function nt(e,t,n){const r=t.fullServerUrl(),s=ce(r,e.host,e._protocol),o="GET",i=e.maxOperationRetryTime,a=new Ke(s,o,Ye(e,n),i);return a.errorHandler=et(t),a}function rt(e,t){return e&&e["contentType"]||t&&t.type()||"application/octet-stream"}function st(e,t,n){const r=Object.assign({},n);return r["fullPath"]=e.path,r["size"]=t.size(),r["contentType"]||(r["contentType"]=rt(null,t)),r}function ot(e,t,n,r,s){const o=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function a(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}const l=a();i["Content-Type"]="multipart/related; boundary="+l;const h=st(t,r,s),c=Xe(h,n),u="--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+l+"\r\nContent-Type: "+h["contentType"]+"\r\n\r\n",d="\r\n--"+l+"--",f=De.getBlob(u,r,d);if(null===f)throw V();const p={name:h["fullPath"]},g=ce(o,e.host,e._protocol),_="POST",m=e.maxUploadRetryTime,w=new Ke(g,_,Je(e,n),m);return w.urlParams=p,w.headers=i,w.body=f.uploadData(),w.errorHandler=Qe(t),w}class it{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function at(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(s){Ze(!1)}const r=t||["active"];return Ze(!!n&&-1!==r.indexOf(n)),n}function lt(e,t,n,r,s){const o=t.bucketOnlyServerUrl(),i=st(t,r,s),a={name:i["fullPath"]},l=ce(o,e.host,e._protocol),h="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":i["contentType"],"Content-Type":"application/json; charset=utf-8"},u=Xe(i,n),d=e.maxUploadRetryTime;function f(e){let t;at(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Ze(!1)}return Ze(ie(t)),t}const p=new Ke(l,h,f,d);return p.urlParams=a,p.headers=c,p.body=u,p.errorHandler=Qe(t),p}function ht(e,t,n,r){const s={"X-Goog-Upload-Command":"query"};function o(e){const t=at(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Ze(!1)}n||Ze(!1);const s=Number(n);return Ze(!isNaN(s)),new it(s,r.size(),"final"===t)}const i="POST",a=e.maxUploadRetryTime,l=new Ke(n,i,o,a);return l.headers=s,l.errorHandler=Qe(t),l}const ct=262144;function ut(e,t,n,r,s,o,i,a){const l=new it(0,0);if(i?(l.current=i.current,l.total=i.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw W();const h=l.total-l.current;let c=h;s>0&&(c=Math.min(c,s));const u=l.current,d=u+c;let f="";f=0===c?"finalize":h===c?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(u,d);if(null===g)throw V();function _(e,n){const s=at(e,["active","final"]),i=l.current+c,a=r.size();let h;return h="final"===s?Je(t,o)(e,n):null,new it(i,a,"final"===s,h)}const m="POST",w=t.maxUploadRetryTime,b=new Ke(n,m,_,w);return b.headers=p,b.body=g.uploadData(),b.progressCallback=a||null,b.errorHandler=Qe(e),b}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ft(e){switch(e){case"running":case"pausing":case"canceling":return dt.RUNNING;case"paused":return dt.PAUSED;case"success":return dt.SUCCESS;case"canceled":return dt.CANCELED;case"error":return dt.ERROR;default:return dt.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t,n){const r=se(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(e){return(...t)=>{Promise.resolve().then((()=>e(...t)))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _t=null;class mt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=x.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=x.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=x.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Y("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Y("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Y("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Y("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Y("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class wt extends mt{initXhr(){this.xhr_.responseType="text"}}function bt(){return _t?_t():new wt}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class vt{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=He(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(C.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(de(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,U),this._needToFetchStatus=!0,void this.completeTransitions_();e=B()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(C.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=lt(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,bt,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=ht(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,bt,t,n);this._request=s,s.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=ct*this._chunkMultiplier,t=new it(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,s)=>{let o;try{o=ut(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const i=this._ref.storage._makeRequest(o,bt,r,s,!1);this._request=i,i.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){const e=ct*this._chunkMultiplier;2*e<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=tt(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,bt,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=ot(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,bt,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=M(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=ft(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const s=new pt(t||void 0,n||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();const e=this._observers.slice();e.forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ft(this._state)){case dt.SUCCESS:gt(this._resolve.bind(null,this.snapshot))();break;case dt.CANCELED:case dt.ERROR:const t=this._reject;gt(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){const t=ft(this._state);switch(t){case dt.RUNNING:case dt.PAUSED:e.next&&gt(e.next.bind(e,this.snapshot))();break;case dt.SUCCESS:e.complete&&gt(e.complete.bind(e))();break;case dt.CANCELED:case dt.ERROR:e.error&&gt(e.error.bind(e,this._error))();break;default:e.error&&gt(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this._service=e,this._location=t instanceof Q?t:Q.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new yt(e,t)}get root(){const e=new Q(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qe(this._location.path)}get storage(){return this._service}get parent(){const e=Le(this._location.path);if(null===e)return null;const t=new Q(this._location.bucket,e);return new yt(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Z(e)}}function kt(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new vt(e,new De(t),n)}function Tt(e){e._throwIfRoot("getDownloadURL");const t=nt(e.storage,e._location,He());return e.storage.makeRequestWithTokens(t,bt).then((e=>{if(null===e)throw $();return e}))}function Et(e,t){const n=Fe(e._location.path,t),r=new Q(e._location.bucket,n);return new yt(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(e){return/^[A-Za-z]+:\/\//.test(e)}function At(e,t){return new yt(e,t)}function St(e,t){if(e instanceof xt){const n=e;if(null==n._bucket)throw H();const r=new yt(n,n._bucket);return null!=t?St(r,t):r}return void 0!==t?Et(e,t):e}function Ut(e,t){if(t&&Rt(t)){if(e instanceof xt)return At(e,t);throw X("To use ref(service, url), the first argument must be a Storage instance.")}return St(e,t)}function Ot(e,t){const n=null===t||void 0===t?void 0:t[R];return null==n?null:Q.makeFromBucketSpec(n,e)}function Ct(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:(0,k.Sg)(s,e.app.options.projectId))}class xt{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=E,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A,this._maxUploadRetryTime=S,this._requests=new Set,this._bucket=null!=r?Q.makeFromBucketSpec(r,this._host):Ot(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Q.makeFromBucketSpec(this._url,e):this._bucket=Ot(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){he("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){he("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();return t.token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yt(this,e)}_makeRequest(e,t,n,r,s=!0){if(this._deleted)return new ee(K());{const o=be(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Nt="@firebase/storage",It="0.11.2",Dt="storage";function Pt(e,t,n){return e=(0,k.m9)(e),kt(e,t,n)}function Lt(e){return e=(0,k.m9)(e),Tt(e)}function Ft(e,t){return e=(0,k.m9)(e),Ut(e,t)}function qt(e=(0,y.getApp)(),t){e=(0,k.m9)(e);const n=(0,y._getProvider)(e,Dt),r=n.getImmediate({identifier:t}),s=(0,k.P0)("storage");return s&&Bt(r,...s),r}function Bt(e,t,n,r={}){Ct(e,t,n,r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new xt(n,r,s,t,y.SDK_VERSION)}function zt(){(0,y._registerComponent)(new T.wA(Dt,Mt,"PUBLIC").setMultipleInstances(!0)),(0,y.registerVersion)(Nt,It,""),(0,y.registerVersion)(Nt,It,"esm2017")}zt();var jt=n(5667);const Ht={key:0,class:"tutorial"},Vt=(0,r._)("div",{class:"tutorial-item"},[(0,r._)("button",{class:"button"},"Submit"),(0,r._)("p",null,"从本地提交一个符合此网站格式的故事到community，该文件需要先登录才能上传到服务器")],-1),Wt=(0,r._)("div",{class:"tutorial-item"},[(0,r._)("button",{class:"preScene-btn"},"⬅️"),(0,r._)("p",null,"点击这个按钮可以返回到上一个关键词所在的段落。")],-1),$t=[Vt,Wt];function Gt(e,t,n,o,i,a){return(0,r.wg)(),(0,r.j4)(s.uT,{name:"fade"},{default:(0,r.w5)((()=>[this.store.tutorialToggle?((0,r.wg)(),(0,r.iD)("div",Ht,$t)):(0,r.kq)("",!0)])),_:1})}var Xt={setup(){const e=(0,m.o)();return{store:e}}},Kt=n(3744);const Zt=(0,Kt.Z)(Xt,[["render",Gt]]);var Jt=Zt,Yt={components:{CommunityTutorial:Jt},setup(){const e=(0,_.W)(),t=(0,m.o)(),n=(0,jt.L)(),r=qt(v),s=Ft(r),o=Ft(s,"Novels"),i="Azeria.txt",a=Ft(o,i),l=a.fullPath,h=a.name;return console.log(l,h),{user:n,store:t,novelStore:e}},data(){const e=n(2135),t=e.keys().map(e);return{textFiles:t}},mounted(){this.textFiles.forEach(((e,t)=>{this.novelStore.setNovelContent(t,e)}))},methods:{async uploadFileToFirebase(e){const t=qt(v),n=Ft(t,`Novels/${e.name}`),r=this.user.userInfo.token,s=Pt(n,e,{customMetadata:{firebaseAuth:r}});s.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break;default:break}}),(e=>{console.error("Upload failed:",e),alert("上传到服务器失败，请检查是否在登录状态")}),(async()=>{const e=await Lt(n);console.log("File available at",e)}))},async readNovel(e){const t=this.novelStore.novels[e].content,n="string"===typeof t?t:t.default;console.log(n),await this.novelStore.setCurrentNovel(n),this.$router.push({name:"reader",query:{startReading:!0}})},importFile(){document.getElementById("file-input").click()},onFileInputChange(e){const t=e.target.files[0];this.uploadFileToFirebase(t);const n=new FileReader;n.onload=e=>{const t=e.target.result;this.parseNovelText(t)},n.readAsText(t)},parseNovelText(e){const t=e.trim().split("\n");let n="";this.store.btnToggle=!this.store.btnToggle,t[0].startsWith("Story Title: ")?(n=t[0].slice(13),this.novelStore.novels.push({title:n,cover:"/availableNovels/111-cover.png",content:e})):alert("请导入此网站所使用格式的文本文件")}}};const Qt=(0,Kt.Z)(Yt,[["render",g]]);var en=Qt},2135:function(e,t,n){var r={"./111.txt":1344};function s(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id=2135},3977:function(e,t,n){"use strict";n.d(t,{C6:function(){return r.getApps},ZF:function(){return r.initializeApp}});var r=n(5816),s="firebase",o="9.20.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(0,r.registerVersion)(s,o,"app")}}]);
//# sourceMappingURL=community.5089fce1.js.map